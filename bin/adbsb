#!/bin/bash

if [ $# -ne 1 ]; then
    echo "adb push a bin to /system/bin/, need 1 arguments"
    exit 1;
fi

filename=`echo $1 | awk -F '/' '{print $NF}'`

relative_path=$1
absolute_path=/system/bin/$1

echo "push file $relative_path to $absolute_path"

if [ ! -f $relative_path ]; then
    echo "error, file not exist ($relative_path)"
    exit
fi

adb remount
echo "pushing ..."
adb push $relative_path $absolute_path
echo "chmoding ..."
adb shell chmod 755 $absolute_path
#echo "rebooting ..."
#adb reboot


exit

